<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BGMI Stat Extractor â€” Kill + Rank + Fragger</title>
  <meta name="description" content="Free BGMI tournament stat extractor. Upload lobby and result screenshots to auto-extract Slots, Ranks, and Kills. No AI API needed." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- HEADER -->
  <header>
    <div class="header-inner">
      <div class="logo">
        <span class="logo-icon">ğŸ®</span>
        <div>
          <h1>BGMI Stat Extractor</h1>
          <p class="logo-sub">Kill Â· Rank Â· Fragger â€” Free Forever</p>
        </div>
      </div>
      <div class="session-time" id="sessionTime">--/--- Â· --:-- --</div>
    </div>
  </header>

  <main>

    <!-- STEP 1 & 2: UPLOAD ZONES -->
    <section class="upload-section">
      <h2 class="section-title">ğŸ“‚ Step 1 â€” Upload Screenshots</h2>
      <div class="upload-grid">

        <!-- LOBBY ZONE -->
        <div class="upload-zone" id="lobbyZone">
          <div class="zone-inner" id="lobbyDrop">
            <div class="zone-icon">ğŸŸï¸</div>
            <div class="zone-label">LOBBY Screenshots</div>
            <div class="zone-hint">Drag &amp; drop or click to select<br/><small>(Multiple files OK)</small></div>
            <input type="file" id="lobbyInput" accept="image/*" multiple hidden />
            <button class="upload-btn" onclick="document.getElementById('lobbyInput').click()">Choose Files</button>
          </div>
          <div class="preview-grid" id="lobbyPreview"></div>
          <div class="file-count" id="lobbyCount"></div>
        </div>

        <!-- RESULT ZONE -->
        <div class="upload-zone" id="resultZone">
          <div class="zone-inner" id="resultDrop">
            <div class="zone-icon">ğŸ†</div>
            <div class="zone-label">RESULT Screenshots</div>
            <div class="zone-hint">Drag &amp; drop or click to select<br/><small>(Multiple files OK)</small></div>
            <input type="file" id="resultInput" accept="image/*" multiple hidden />
            <button class="upload-btn" onclick="document.getElementById('resultInput').click()">Choose Files</button>
          </div>
          <div class="preview-grid" id="resultPreview"></div>
          <div class="file-count" id="resultCount"></div>
        </div>

      </div>
    </section>

    <!-- STEP 2: PROCESS -->
    <section class="process-section">
      <button class="process-btn" id="processBtn" disabled>
        <span class="btn-icon">âš¡</span> Extract Data
      </button>
      <div class="progress-wrap" id="progressWrap" style="display:none">
        <div class="progress-label" id="progressLabel">Initialising OCRâ€¦</div>
        <div class="progress-bar-track">
          <div class="progress-bar-fill" id="progressFill"></div>
        </div>
        <div class="progress-percent" id="progressPercent">0%</div>
      </div>
    </section>

    <!-- RAW OCR TOGGLE (for debugging) -->
    <section class="raw-section" id="rawSection" style="display:none">
      <details class="raw-details">
        <summary>ğŸ” View Raw OCR Text (for manual corrections)</summary>
        <div class="raw-grid">
          <div>
            <h4>Lobby OCR Text</h4>
            <textarea id="lobbyRaw" class="raw-textarea" rows="12" placeholder="Lobby OCR output will appear hereâ€¦"></textarea>
          </div>
          <div>
            <h4>Result OCR Text</h4>
            <textarea id="resultRaw" class="raw-textarea" rows="12" placeholder="Result OCR output will appear hereâ€¦"></textarea>
          </div>
        </div>
        <button class="reparse-btn" id="reparseBtn">â™»ï¸ Re-Parse from Edited Text</button>
      </details>
    </section>

    <!-- OUTPUT SECTION -->
    <section class="output-section" id="outputSection" style="display:none">
      <h2 class="section-title">ğŸ“Š Step 2 â€” Copy Your Data</h2>

      <div class="output-meta" id="outputMeta"></div>

      <div class="blocks-grid">

        <!-- BLOCK 1: Slot Numbers -->
        <div class="output-block" id="block1Wrap">
          <div class="block-header">
            <span class="block-label">ğŸ“‹ Column 1 â€” Slot Numbers</span>
            <button class="copy-btn" onclick="copyBlock('block1')">Copy</button>
          </div>
          <textarea class="block-textarea" id="block1" readonly></textarea>
        </div>

        <!-- BLOCK 2: Ranks -->
        <div class="output-block" id="block2Wrap">
          <div class="block-header">
            <span class="block-label">ğŸ“‹ Column 2 â€” Ranks</span>
            <button class="copy-btn" onclick="copyBlock('block2')">Copy</button>
          </div>
          <textarea class="block-textarea" id="block2" readonly></textarea>
        </div>

        <!-- BLOCK 3: Team Total Kills -->
        <div class="output-block" id="block3Wrap">
          <div class="block-header">
            <span class="block-label">ğŸ“‹ Column 3 â€” Team Total Kills</span>
            <button class="copy-btn" onclick="copyBlock('block3')">Copy</button>
          </div>
          <textarea class="block-textarea" id="block3" readonly></textarea>
        </div>

        <!-- BLOCK 4: Player Names -->
        <div class="output-block wide" id="block4Wrap">
          <div class="block-header">
            <span class="block-label">ğŸ“‹ Column 4 â€” Player Names <small>(6 rows/slot)</small></span>
            <button class="copy-btn" onclick="copyBlock('block4')">Copy</button>
          </div>
          <textarea class="block-textarea tall" id="block4" readonly></textarea>
        </div>

        <!-- BLOCK 5: Individual Kills -->
        <div class="output-block wide" id="block5Wrap">
          <div class="block-header">
            <span class="block-label">ğŸ“‹ Column 5 â€” Individual Kills <small>(6 rows/slot)</small></span>
            <button class="copy-btn" onclick="copyBlock('block5')">Copy</button>
          </div>
          <textarea class="block-textarea tall" id="block5" readonly></textarea>
        </div>

      </div>

      <div class="summary-bar" id="summaryBar"></div>

      <button class="reset-btn" onclick="resetAll()">ğŸ”„ Process New Match</button>
    </section>

    <!-- ERROR -->
    <div class="error-toast" id="errorToast" style="display:none"></div>

  </main>

  <footer>
    <p>ğŸ® BGMI Stat Extractor Â· Free &amp; Open Source Â· Hosted on GitHub Pages Â· OCR by <a href="https://github.com/naptha/tesseract.js" target="_blank">Tesseract.js</a></p>
  </footer>

  <!-- Tesseract.js from CDN â€” runs 100% in browser, no API key needed -->
  <script src="https://unpkg.com/tesseract.js@4/dist/tesseract.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
